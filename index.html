<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥ä½œæ€§ä»·æ¯”å…¨ç»´åº¦æµ‹è¯„æŠ¥å‘Š 2.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <style>
        body { background-color: #0f172a; color: #f8fafc; font-family: -apple-system, sans-serif; }
        .glass-card { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .btn-gradient { background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%); }
        .input-dark { @apply w-full bg-slate-800 border border-slate-700 rounded-lg p-2 outline-none focus:border-indigo-500 text-sm; }
        label { @apply block text-xs text-slate-400 mb-1; }
        #reportOutput, #paymentModal, #imageModal { display: none; } /* é»˜è®¤éšè— imageModal */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        
        /* æ·»åŠ ç®€å•çš„æ·¡å…¥åŠ¨ç”» */
        .fade-in { animation: fadeIn 0.2s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body class="p-4 md:p-8 flex flex-col items-center min-h-screen">

    <!-- ç¬¬ä¸€æ­¥ï¼šè¾“å…¥è¡¨å• (ä¿æŒä¸å˜) -->
    <div id="inputForm" class="max-w-xl w-full space-y-4">
        <header class="text-center mb-6">
            <h1 class="text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-indigo-400 to-purple-500 tracking-tight">
                æ€§ä»·æ¯”æµ‹è¯„ 2.0 ä¸“ä¸šç‰ˆ
            </h1>
            <p class="text-slate-500 text-xs mt-2 uppercase tracking-widest">Job Value Analysis Professional</p>
        </header>

        <div class="glass-card p-6 rounded-3xl shadow-2xl space-y-4">
            <!-- ç»æµç»´åº¦ -->
            <div class="grid grid-cols-2 gap-4">
                <div><label>å¹´è–ªæ€»åŒ… (ä¸‡å…ƒ)</label><input type="number" id="salary" placeholder="å«å¥–é‡‘/å…¬ç§¯é‡‘" class="input-dark bg-slate-800 border border-slate-700 rounded-lg p-2 w-full"></div>
                <div><label>åœ°åŒº PPP</label><select id="ppp" class="input-dark bg-slate-800 border border-slate-700 rounded-lg p-2 w-full"><option value="1">ä¸­å›½å¤§é™† (1.0)</option><option value="1.5">æ¬§ç¾åœ°åŒº (1.5)</option><option value="0.8">ä¸œå—äºš (0.8)</option></select></div>
            </div>
            <!-- æ—¶é—´ç»´åº¦ -->
            <div class="grid grid-cols-3 gap-2">
                <div><label>å‘¨å·¥ä½œå¤©æ•°</label><input type="number" id="workDays" value="5" class="input-dark bg-slate-800 border border-slate-700 rounded-lg p-2 w-full"></div>
                <div><label>æ—¥æ€»å·¥æ—¶/h</label><input type="number" id="hours" value="9" class="input-dark bg-slate-800 border border-slate-700 rounded-lg p-2 w-full"></div>
                <div><label>å‘¨WFHå¤©æ•°</label><input type="number" id="wfh" value="0" class="input-dark bg-slate-800 border border-slate-700 rounded-lg p-2 w-full"></div>
            </div>
            <div class="grid grid-cols-3 gap-2">
                <div><label>æ—¥é€šå‹¤/h</label><input type="number" id="commute" value="1.5" class="input-dark bg-slate-800 border border-slate-700 rounded-lg p-2 w-full"></div>
                <div><label>æ—¥æ‘¸é±¼/h</label><input type="number" id="relax" value="1" class="input-dark bg-slate-800 border border-slate-700 rounded-lg p-2 w-full"></div>
                <div><label>å¹´å‡+æ³•å®š/d</label><input type="number" id="holiday" value="16" class="input-dark bg-slate-800 border border-slate-700 rounded-lg p-2 w-full"></div>
            </div>
            <!-- è½¯æ€§ç»´åº¦ -->
            <div class="grid grid-cols-2 gap-4">
                <div><label>èŒä¸šç¨³å®šæ€§</label><select id="stability" class="input-dark bg-slate-800 border border-slate-700 rounded-lg p-2 w-full"><option value="1.2">äº‹ä¸šå•ä½/ç¼–</option><option value="1.1">å¤§å‚/æ ¸å¿ƒå›½ä¼</option><option value="1.0">æ™®é€šå¤–ä¼/æ°‘ä¼</option><option value="0.7">åŠ³åŠ¡æ´¾é£/OD</option></select></div>
                <div><label>æ‰€åœ¨åŸå¸‚</label><select id="city" class="input-dark bg-slate-800 border border-slate-700 rounded-lg p-2 w-full"><option value="0.8">ä¸€çº¿åŸå¸‚</option><option value="1.0">æ–°ä¸€çº¿/äºŒçº¿</option><option value="1.3">ä¸‰å››çº¿/è€å®¶</option></select></div>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div><label>é¢†å¯¼/åŒäº‹å…³ç³»</label><select id="emotion" class="input-dark bg-slate-800 border border-slate-700 rounded-lg p-2 w-full"><option value="1.1">ç¥ä»™æ°›å›´</option><option value="1.0">æ­£å¸¸ç¤¾äº¤</option><option value="0.7">å‹¾å¿ƒæ–—è§’</option></select></div>
                <div><label>æœ€é«˜å­¦å†</label><select id="edu" class="input-dark bg-slate-800 border border-slate-700 rounded-lg p-2 w-full"><option value="1.2">åšå£«</option><option value="1.1">ç¡•å£«</option><option value="1.0">æœ¬ç§‘</option><option value="0.9">å¤§ä¸“åŠä»¥ä¸‹</option></select></div>
            </div>

            <button onclick="checkInputsAndShowPayment()" class="w-full btn-gradient h-14 rounded-2xl font-black text-white shadow-xl shadow-indigo-500/20 active:scale-95 transition-transform">
                ç”Ÿæˆå…¨ç»´åº¦åˆ†ææŠ¥å‘Š
            </button>
        </div>
    </div>

    <!-- ç¬¬äºŒæ­¥ï¼šæ”¯ä»˜ä¸è”ç³»æ–¹å¼å¼¹çª— (å·²ä¿®æ”¹ï¼šæ”¯æŒå›¾ç‰‡æ”¾å¤§) -->
    <div id="paymentModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md p-4 fade-in">
        <div class="glass-card max-w-sm w-full p-6 rounded-3xl border border-indigo-500/30 relative">
            <button onclick="closePayment()" class="absolute top-4 right-4 text-slate-500 hover:text-white">âœ•</button>
            
            <div class="text-center mb-4">
                <h3 class="text-xl font-bold text-white">è§£é”æ·±åº¦æµ‹è¯„æŠ¥å‘Š</h3>
                <p class="text-xs text-slate-400 mt-1">è¯·å®Œæˆä»¥ä¸‹ä¸¤æ­¥è·å–éªŒè¯ç </p>
            </div>

            <!-- åŒæ å›¾ç‰‡åŒºåŸŸ -->
            <div class="grid grid-cols-2 gap-4 mb-3">
                <!-- å·¦è¾¹ï¼šæ”¶æ¬¾ç  -->
                <div class="flex flex-col items-center group">
                    <div class="bg-white p-1 rounded-xl w-32 h-32 flex items-center justify-center overflow-hidden mb-2 ring-2 ring-transparent group-hover:ring-indigo-500 transition-all cursor-zoom-in">
                        <!-- ğŸ”¥ ä¿®æ”¹ç‚¹ï¼šå¢åŠ  onclick äº‹ä»¶ -->
                        <img src="./qr.jpg" alt="ä»˜æ¬¾ç " class="w-full h-full object-cover" onclick="showLargeImage(this.src)">
                    </div>
                    <div class="text-center">
                        <span class="bg-yellow-500 text-black text-[10px] font-bold px-2 py-0.5 rounded-full">ç¬¬ä¸€æ­¥</span>
                        <p class="text-[10px] text-slate-300 mt-1">æ‰«ç æ”¯ä»˜ <span class="text-yellow-400 font-bold">0.99å…ƒ</span><br>å¤‡æ³¨â€œå·¥ä½œæ€§ä»·æ¯”â€</br></p>
                        <p class="text-[9px] text-slate-500">(ç‚¹å‡»äºŒç»´ç å¯æ”¾å¤§)</p>
                    </div>
                </div>

                <!-- å³è¾¹ï¼šå°çº¢ä¹¦å· -->
                <div class="flex flex-col items-center group">
                    <div class="bg-white p-1 rounded-xl w-32 h-32 flex items-center justify-center overflow-hidden mb-2 ring-2 ring-transparent group-hover:ring-pink-500 transition-all cursor-zoom-in">
                        <!-- ğŸ”¥ ä¿®æ”¹ç‚¹ï¼šå¢åŠ  onclick äº‹ä»¶ -->
                        <img src="./xhs.jpg" alt="å°çº¢ä¹¦" class="w-full h-full object-cover" onclick="showLargeImage(this.src)">
                    </div>
                    <div class="text-center">
                        <span class="bg-pink-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full">ç¬¬äºŒæ­¥</span>
                        <p class="text-[10px] text-slate-300 mt-1">ç§ä¿¡å‘é€<span class="text-white font-bold">ä»˜æ¬¾æˆªå›¾</span></p>
                        <p class="text-[9px] text-slate-500">(ç‚¹å‡»å›¾ç‰‡å¯æ”¾å¤§)</p>
                    </div>
                </div>
            </div>

            <!-- éªŒè¯è¾“å…¥åŒº -->
            <div class="bg-slate-800/50 p-1 rounded-xl border border-slate-700/50 mt-2">
                <div class="flex gap-2">
                    <input type="text" id="verifyCodeInput" placeholder="åœ¨æ­¤è¾“å…¥éªŒè¯ç " class="flex-1 bg-transparent border-none px-4 py-3 text-center text-white outline-none placeholder-slate-600 font-bold tracking-widest">
                    <button onclick="verifyCode()" class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 rounded-lg font-bold shadow-lg text-sm">
                        è§£é”
                    </button>
                </div>
            </div>
            
            <p class="text-[10px] text-slate-500 text-center mt-3">éªŒè¯ç ç”±äººå·¥æ ¸é”€ï¼Œè¯·å‹¿é‡å¤æ”¯ä»˜</p>
        </div>
    </div>

    <!-- ğŸ”¥ æ–°å¢åŠŸèƒ½ï¼šå›¾ç‰‡å…¨å±æŸ¥çœ‹å™¨ (Lightbox) -->
    <div id="imageModal" class="fixed inset-0 z-[60] bg-black/95 flex flex-col items-center justify-center p-4 fade-in" onclick="hideLargeImage()">
        <button class="absolute top-6 right-6 text-white/70 hover:text-white text-4xl font-light">&times;</button>
        <img id="lightboxImg" src="" class="max-w-full max-h-[80vh] rounded-lg shadow-2xl border border-white/10 object-contain">
        <p class="text-slate-400 text-sm mt-4">ç‚¹å‡»ä»»æ„å¤„å…³é—­</p>
    </div>

    <!-- ç¬¬ä¸‰æ­¥ï¼šæŠ¥å‘Šé¡µé¢ (ä¿æŒä¸å˜) -->
    <div id="reportOutput" class="max-w-md w-full">
        <div id="captureArea" class="glass-card p-6 rounded-[2.5rem] border-2 border-indigo-500/40 relative overflow-hidden">
            <div class="absolute -top-10 -right-10 w-32 h-32 bg-indigo-600/10 rounded-full blur-3xl"></div>
            <div class="flex justify-between items-start mb-6">
                <div>
                    <span class="text-[10px] text-indigo-400 font-mono tracking-widest uppercase">Analysis Report</span>
                    <h2 class="text-2xl font-black italic tracking-tighter">å·¥ä½œæ€§ä»·æ¯”æµ‹è¯„</h2>
                </div>
                <div class="text-right">
                    <p class="text-[8px] text-slate-500 font-mono" id="reportID"></p>
                    <p class="text-[8px] text-slate-500">2024 LAB DATA</p>
                </div>
            </div>
            <div class="bg-gradient-to-br from-slate-900/80 to-slate-800/80 rounded-3xl p-6 mb-6 border border-white/5">
                <div class="flex justify-around items-center">
                    <div class="text-center">
                        <p class="text-slate-400 text-[10px] uppercase mb-1 font-bold">Comprehensive Score</p>
                        <p id="scoreNum" class="text-5xl font-black text-indigo-400 drop-shadow-lg">0</p>
                    </div>
                    <div class="h-12 w-px bg-slate-700"></div>
                    <div class="text-center">
                        <p class="text-slate-400 text-[10px] uppercase mb-1 font-bold">Value Rank</p>
                        <p id="levelRank" class="text-5xl font-black text-purple-400 italic">D</p>
                    </div>
                </div>
            </div>
            <div class="relative w-full aspect-square mb-6 px-4">
                <canvas id="radarChart"></canvas>
            </div>
            <div class="bg-indigo-600/5 rounded-2xl p-5 border border-indigo-500/10 mb-4">
                <p id="commentTitle" class="font-black text-lg mb-2 text-indigo-300"></p>
                <p id="commentText" class="text-xs text-slate-300 leading-relaxed font-medium"></p>
            </div>
            <div class="flex items-center justify-between opacity-50 px-2">
                <p class="text-[8px] font-mono italic">Work/Life Balance Laboratory</p>
                <div class="flex items-center gap-1"><div class="w-1 h-1 bg-green-500 rounded-full"></div><p class="text-[8px]">Verified Result</p></div>
            </div>
        </div>
        <div class="mt-6 space-y-3">
            <button onclick="saveImage()" class="w-full bg-white text-black h-14 rounded-2xl font-bold flex items-center justify-center gap-2 shadow-xl">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                <span>ä¿å­˜æµ‹è¯•æŠ¥å‘Šæµ·æŠ¥</span>
            </button>
            <button onclick="location.reload()" class="w-full text-slate-500 text-sm py-2 hover:text-white transition-colors">é‡æ–°æµ‹è¯„</button>
        </div>
    </div>

    <script>
        // --- æ ¸å¿ƒé…ç½® ---
        const SECRET_CODE = "8888"; 
        // ----------------

        let myChart = null;

        // ğŸ”¥ æ–°å¢ï¼šæ˜¾ç¤ºå¤§å›¾é€»è¾‘
        function showLargeImage(src) {
            const modal = document.getElementById('imageModal');
            const img = document.getElementById('lightboxImg');
            img.src = src;
            modal.style.display = 'flex';
        }

        // ğŸ”¥ æ–°å¢ï¼šå…³é—­å¤§å›¾é€»è¾‘
        function hideLargeImage() {
            document.getElementById('imageModal').style.display = 'none';
        }

        function checkInputsAndShowPayment() {
            const salary = document.getElementById('salary').value;
            if(!salary) return alert("âš ï¸ è¯·å…ˆè¾“å…¥ã€å¹´è–ªæ€»åŒ…ã€‘æ‰èƒ½ç”ŸæˆæŠ¥å‘Šå“¦ï¼");
            document.getElementById('paymentModal').style.display = 'flex';
        }

        function closePayment() {
            document.getElementById('paymentModal').style.display = 'none';
        }

        function verifyCode() {
            const input = document.getElementById('verifyCodeInput').value.trim();
            if (input === SECRET_CODE) {
                closePayment();
                generateReport();
            } else {
                alert("âŒ éªŒè¯ç é”™è¯¯ï¼è¯·æ£€æŸ¥ç§ä¿¡è·å–çš„å·ç ã€‚");
            }
        }

        function generateReport() {
            // ä¿æŒåŸæœ‰çš„è®¡ç®—é€»è¾‘ä¸å˜
            const val = (id) => parseFloat(document.getElementById(id).value) || 0;
            const salary = val('salary');
            const ppp = val('ppp');
            const workDays = val('workDays');
            const hours = val('hours');
            const wfh = val('wfh');
            const commute = val('commute');
            const relax = val('relax');
            const holiday = val('holiday');
            const stability = val('stability');
            const city = val('city');
            const emotion = val('emotion');
            const edu = val('edu');

            const realCommute = Math.max(0, (workDays - wfh) * commute);
            const weeklyHours = (workDays * (hours - relax)) + realCommute;
            const yearlyHours = weeklyHours * 52 - (holiday * (hours / 1.2));
            const hourlyRate = (salary / yearlyHours) * 10000;
            
            const d_income = Math.min(100, (hourlyRate / 1.5) * ppp);
            const d_time = Math.min(100, (1 - (weeklyHours / 60)) * 100 + (wfh * 10));
            const d_stability = stability * 80;
            const d_environment = city * 75;
            const d_emotion = emotion * 85;
            const d_edu_match = Math.min(100, (hourlyRate / (edu * 50)) * 100);

            const finalScore = ((d_income + d_time + d_stability + d_environment + d_emotion + d_edu_match) / 6 * edu).toFixed(1);

            document.getElementById('inputForm').style.display = 'none';
            document.getElementById('reportOutput').style.display = 'block';
            document.getElementById('scoreNum').innerText = finalScore;
            document.getElementById('reportID').innerText = 'ID: ' + Math.random().toString(36).substr(2, 9).toUpperCase();

            let level="D", title="æ…ˆå–„å®¶", text="å»ºè®®æŠ¥è­¦";
            if(finalScore >= 95) { level="SSS"; title="èŒåœºé”¦é²¤"; text="ä½ è¿™å“ªæ˜¯åœ¨ä¸Šç­ï¼Ÿä½ æ˜¯åœ¨é€šè¿‡åŠ³åŠ¨åˆæ³•â€˜è¯ˆéª—â€™ä¼ä¸šã€‚è¿™ç§æ€§ä»·æ¯”å»ºè®®ç›´æ¥å¹²åˆ°é€€ä¼‘ï¼"; }
            else if(finalScore >= 85) { level="SS"; title="ç¥ä»™å…¬å¸"; text="ä½ çš„å·¥ä½œä¸ä»…ä½“é¢ï¼Œè€Œä¸”æå…¶æ»‹æ¶¦ã€‚ç”Ÿæ´»ä¸å·¥ä½œè¾¾åˆ°äº†è¯¡å¼‚çš„åŠ¨æ€å¹³è¡¡ã€‚"; }
            else if(finalScore >= 75) { level="S"; title="èŒåœºèµ¢å®¶"; text="éå¸¸æ‰å®çš„ä¸€ä»½å·¥ä½œã€‚å±äºå…¸å‹çš„â€˜é’±å¤šäº‹å°‘ç¦»å®¶è¿‘â€™é€‰æ‰‹ã€‚"; }
            else if(finalScore >= 60) { level="A"; title="åˆæ ¼ç¤¾ç•œ"; text="ç»´æŒäº†ä½œä¸ºä½“é¢äººçš„æœ€åå°Šä¸¥ã€‚è™½ç„¶æ²¡æœ‰å¤§å¯Œå¤§è´µï¼Œä½†æˆåŠŸé¿å¼€äº†ä¿®ç½—åœºã€‚"; }
            else if(finalScore >= 45) { level="B"; title="åŠ³ç¢Œå‘½"; text="æ€§ä»·æ¯”å ªå¿§ã€‚ä½ ç°åœ¨çš„æ¯ä¸€åˆ†é’±ï¼Œéƒ½æ˜¯ç”¨å¤´å‘å’Œä¸‹ç­åçš„çµé­‚æ¢æ¥çš„ã€‚"; }
            else if(finalScore >= 30) { level="C"; title="å¤§å†¤ç§"; text="ä½ æ˜¯è€æ¿çœ¼é‡Œçš„å¥½å‘˜å·¥ï¼Œå®¶äººçœ¼é‡Œçš„å¤±è¸ªäººå£ã€‚ä½ æ˜¯åœ¨ç”¨å‘½æ¢é’±ã€‚"; }
            else { level="D"; title="æ…ˆå–„å…ˆé”‹"; text="ä½ ä¸æ˜¯åœ¨ä¸Šç­ï¼Œä½ æ˜¯åœ¨ç»™è€æ¿ææ¬¾ã€‚å¿«æŠ¥è­¦å§ï¼Œå¤šå¹²ä¸€ç§’éƒ½æ˜¯å¯¹ç”Ÿå‘½çš„äºµæ¸ï¼"; }
            
            document.getElementById('levelRank').innerText = level;
            document.getElementById('commentTitle').innerText = title;
            document.getElementById('commentText').innerText = text;

            const ctx = document.getElementById('radarChart').getContext('2d');
            if(myChart) myChart.destroy();
            myChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['ç»æµå›æŠ¥', 'æ—¶é—´è‡ªç”±', 'èŒä¸šç¨³å®š', 'åŸå¸‚å‹åŠ›', 'æƒ…ç»ªä»·å€¼', 'å­¦å†åŒ¹é…'],
                    datasets: [{
                        data: [d_income, d_time, d_stability, d_environment, d_emotion, d_edu_match],
                        fill: true,
                        backgroundColor: 'rgba(99, 102, 241, 0.2)',
                        borderColor: 'rgb(129, 140, 248)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgb(168, 85, 247)',
                    }]
                },
                options: {
                    scales: { r: { min: 0, max: 100, ticks: { display: false }, grid: { color: 'rgba(255,255,255,0.05)' }, angleLines: { color: 'rgba(255,255,255,0.1)' }, pointLabels: { color: '#94a3b8', font: { size: 10, weight: '600' } } } },
                    plugins: { legend: { display: false } }
                }
            });
        }

        function saveImage() {
            const area = document.getElementById('captureArea');
            html2canvas(area, { backgroundColor: '#0f172a', scale: 3, useCORS: true }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'æ€§ä»·æ¯”æŠ¥å‘Š_' + new Date().getTime() + '.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        }
    </script>
</body>
</html>
